!function(e,t){"function"==typeof define&&define.amd?define([],t):"undefined"!=typeof exports?module.exports=t():e.Templater=t()}(this,function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();return function(){function r(){e(this,r)}return t(r,null,[{key:"getAttributeValue",value:function(e,t,r){return e===r.htmlPlaceholder?t.innerHTML:t.getAttribute(e)}},{key:"processTemplate",value:function(e,t,r){var n=this;return t.replace(r.bracketsRegexp,function(t,a){return n.getAttributeValue(a,e,r)})}},{key:"getDOM",value:function(e){return e.parseHtmlPage?window.document:e.document}},{key:"replaceCustomTag",value:function(e,t,r,n){return e.replace(t[0].outerHTML,this.processTemplate(t[0],r,n))}},{key:"parseFromHtmlOrFile",value:function(e,t,r,n){e.parseHtmlPage?t[0].outerHTML=this.replaceCustomTag(t[0].outerHTML,t,n,e):r.rawHTML=this.replaceCustomTag(r.rawHTML,t,n,e)}},{key:"processAllCurrentTags",value:function(e,t,r){var n=this.getDOM(e),a=n.getElementsByTagName(t);a.length&&(this.parseFromHtmlOrFile(e,a,n,r),this.processAllCurrentTags(e,t,r))}},{key:"run",value:function(e){for(var t in e.tags)if(e.tags.hasOwnProperty(t))try{this.processAllCurrentTags(e,t,fs.readFileSync(e.tags[t],"utf8"))}catch(r){this.processAllCurrentTags(e,t,e.tags[t])}if(!e.parseHtmlPage){return this.getDOM(e).rawHTML}}}]),r}()});