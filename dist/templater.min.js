"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),Templater=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getAttributeValue",value:function(e,t,r){return e===r.htmlPlaceholder?t.innerHTML:t.getAttribute(e)}},{key:"processTemplate",value:function(e,t,r){var a=this;return t.replace(r.bracketsRegexp,function(t,n){return a.getAttributeValue(n,e,r)})}},{key:"getDOM",value:function(e){return e.parseHtmlPage?window.document:e.document}},{key:"replaceCustomTag",value:function(e,t,r,a){return e.replace(t[0].outerHTML,this.processTemplate(t[0],r,a))}},{key:"parseFromHtmlOrFile",value:function(e,t,r,a){e.parseHtmlPage?t[0].outerHTML=this.replaceCustomTag(t[0].outerHTML,t,a,e):r.rawHTML=this.replaceCustomTag(r.rawHTML,t,a,e)}},{key:"processAllCurrentTags",value:function(e,t,r){var a=this.getDOM(e),n=a.getElementsByTagName(t);n.length&&(this.parseFromHtmlOrFile(e,n,a,r),this.processAllCurrentTags(e,t,r))}},{key:"run",value:function(e){for(var t in e.tags)if(e.tags.hasOwnProperty(t))try{this.processAllCurrentTags(e,t,fs.readFileSync(e.tags[t],"utf8"))}catch(r){this.processAllCurrentTags(e,t,e.tags[t])}if(!e.parseHtmlPage){return this.getDOM(e).rawHTML}}}]),e}();module.exports=new Templater;